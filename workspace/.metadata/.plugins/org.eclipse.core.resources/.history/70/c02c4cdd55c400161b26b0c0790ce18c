package Auto2;

import java.util.ArrayList;

public class UtiliseAutomate {

    /**
     * @param args
     */
    public static void main(String[] args) {
        ////////// exemple d'automate ; phase 1 construction
        int N=4;
        ArrayList<String> noms=new ArrayList<String>();
        
        noms.add("Pim");
        noms.add("Pam");
        noms.add("Poum");
        noms.add("Pipo");

        Automate A = new AutomateNonDeterministe(noms);
        A.rendInitial("Pim");
        A.rendInitial("Poum");

        A.rendFinal("Poum");
        A.rendFinal("Pipo");

        /*for (int i=1;i<N*N;i++){
        	int source=(i+i/3) % N ;
        	int numsymb= (i*i+5)%N ;
        	String symb="abcdefghijklmno".substring(numsymb,numsymb+1) ;
        	int but=(i+i/5+1)%N ;
            A.ajouteTransition("E"+source, symb,"E"+but );
        }*/
        A.ajouteTransition("Pim", "Da" ,"Pam" );
        A.ajouteTransition("Pim", "Da" ,"Poum" );
        A.ajouteTransition("Poum", "ba" ,"Pam" );
        A.ajouteTransition("Pam", "ba" ,"Pipo" );
        A.ajouteTransition("Pam", "ba" ,"Pim" );
        A.ajouteTransition("Pipo", "Da" ,"Poum" );
        A.ajouteTransition("Pipo", "Da" ,"Pam" );

        System.out.println(A);
        
        ///////// phase 2 utilisation
        // d'abord un mot reconnu
        String mot="ba";  // mot à reconnaitre caractère par caractère
        A.reinitialise(); // on trouvera un sommet initial à la première transition
        for (int i=0;i<mot.length();i = i + 2){
            A.transite(mot.substring(i,i+2)); // on transite avec chaque caractère
        }
        System.out.println(mot + " "+ A.resultat()); // reconnu
        // puis un mot non reconnu (absence de transition)
        mot="baDaba";  // mot à reconnaitre caractère par caractère
        A.initialise("Pim"); // on part d'un sommet initial donné
        for (int i=0;i<mot.length();i = i + 2){
            A.transite(mot.substring(i,i+2)); // on transite avec chaque caractère
        }
        System.out.println(mot + " "+A.resultat()); // Pas de transition de l'état 4 avec a

        // puis un mot non reconnu (état d'arrivée non final)
        mot="babaDababaDababaDababaDababaDababaDababaDababaDa";  // mot à reconnaitre caractère par caractère
        A.initialise("Poum"); // on part d'un sommet initial
        for (int i=0;i<mot.length();i = i + 2){
            A.transite(mot.substring(i,i+2)); // on transite avec chaque caractère
        }
        System.out.println(mot + " "+A.resultat()); // Pas final
    }
}